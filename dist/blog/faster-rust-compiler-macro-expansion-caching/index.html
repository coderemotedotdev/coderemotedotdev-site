<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.5.4"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://www.coderemote.dev/blog/faster-rust-compiler-macro-expansion-caching/"><!-- Primary Meta Tags --><title>How I reduced (incremental) Rust compile times by up to 40%</title><meta name="title" content="How I reduced (incremental) Rust compile times by up to 40%"><meta name="description" content="Incremental Rust builds just became up to 40% faster ... with one new feature."><!-- MailerLite Universal --><!-- End MailerLite Universal --><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://www.coderemote.dev/blog/faster-rust-compiler-macro-expansion-caching/"><meta property="og:title" content="How I reduced (incremental) Rust compile times by up to 40%"><meta property="og:description" content="Incremental Rust builds just became up to 40% faster ... with one new feature."><meta property="og:image" content="https://www.coderemote.dev/main_logo.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://www.coderemote.dev/blog/faster-rust-compiler-macro-expansion-caching/"><meta property="twitter:title" content="How I reduced (incremental) Rust compile times by up to 40%"><meta property="twitter:description" content="Incremental Rust builds just became up to 40% faster ... with one new feature."><meta property="twitter:image" content="https://www.coderemote.dev/main_logo.png"><link rel="stylesheet" href="/_astro/_slug_.Di0ZJVMc.css" />
<link rel="stylesheet" href="/_astro/_slug_.B3byy3Hn.css" />
<style>:root{--accent: #2337ff;--accent-dark: #000d8a;--black: 15, 18, 25;--gray: 96, 115, 159;--gray-light: 229, 233, 240;--gray-dark: 34, 41, 57;--gray-gradient: rgba(var(--gray-light), 50%), #fff;--box-shadow: 0 2px 6px rgba(var(--gray), 25%), 0 8px 24px rgba(var(--gray), 33%), 0 16px 32px rgba(var(--gray), 33%)}@font-face{font-family:Atkinson;src:url(/fonts/atkinson-regular.woff) format("woff");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Atkinson;src:url(/fonts/atkinson-bold.woff) format("woff");font-weight:700;font-style:normal;font-display:swap}body{padding:0;text-align:left;background:linear-gradient(var(--gray-gradient)) no-repeat;background-size:100% 600px;word-wrap:break-word;overflow-wrap:break-word;color:rgb(var(--gray-dark));font-size:18px;line-height:1.7}main{width:720px;max-width:calc(100% - 1em);margin:auto;padding:3em 1em;font-family:Atkinson,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:700;margin:1rem 0 .5rem;color:rgb(var(--black));line-height:1.2}h1{font-size:3.052em}h2{font-size:2.441em}h3{font-size:1.953em}h4{font-size:1.563em}h5{font-size:1.25em}strong,b{font-weight:700}a,a:hover{color:var(--accent)}.prose{width:720px;max-width:calc(100% - 1em);margin:auto;padding:1em;color:rgb(var(--gray-dark))}.prose p{padding-top:.25em;margin-bottom:.75em}.prose ul li{list-style-type:disc;list-style-position:outside;margin-left:1.75rem;padding:.25rem}textarea{width:100%;font-size:16px}input{font-size:16px}table{width:100%}img{max-width:100%;height:auto;border-radius:8px}code{padding:2px 5px;border-radius:2px;font-size:smaller}pre{padding:1.5em;border-radius:8px;line-height:1.25}pre>code{all:unset;font-size:small}section[class=footnotes] li{scroll-margin-top:12rem}blockquote{border-left:4px solid var(--accent);padding:0 0 0 20px;margin:0;font-size:1.333em}hr{border:none;border-top:1px solid rgb(var(--gray-light))}.row{display:flex;-moz-column-gap:.5rem;column-gap:.5rem}.column{flex:45%;align-self:center}@media (max-width: 720px){body{font-size:16px}main{padding:1em}h1{font-size:2.4em}h2{font-size:2.15em}.prose{font-size:1.25em}.prose table{font-size:.75em}section[class=footnotes] li{scroll-margin-top:12rem}.row{display:unset}}
main[data-astro-cid-bvzihdzo]{width:calc(100% - 1em);max-width:100%}.hero-image[data-astro-cid-bvzihdzo]{width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}@media (max-width: 720px){main[data-astro-cid-bvzihdzo]{width:100%}}
</style><script type="module">(function(e,a,c,m,t,s,n){e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},s=a.createElement(c),s.async=1,s.src=m,n=a.getElementsByTagName(c)[0],n.parentNode.insertBefore(s,n)})(window,document,"script","https://assets.mailerlite.com/js/universal.js","ml");ml("account","863845");
</script></head> <body data-astro-cid-bvzihdzo> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="2tEoMt" prefix="r0" component-url="/_astro/Navbar.DDrXyhpD.js" component-export="Navbar" renderer-url="/_astro/client.DURhWcR2.js" props="{&quot;isFixed&quot;:[0,false],&quot;navbarFixBeyondPctScrollHeight&quot;:[0,64],&quot;data-astro-cid-bvzihdzo&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;Navbar&quot;,&quot;value&quot;:true}" await-children=""><nav class="w-full h-20 flex flex-col justify-center items-center  bg-customDarkBg1 lg:bg-customDarkBgTransparent z-40 lg:backdrop-blur-xl"><div class="2xl:w-[1280px] xl:w-10/12 w-11/12 flex justify-between items-center relative"><div style="opacity:0"><a class="navbar-link" href="/#home" aria-label="Home"><div class="flex justify-start items-center grow basis-0"><div class="text-white mr-2 text-6xl"><svg xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" clip-rule="evenodd" viewBox="0 0 655.944 211.604" width="130" height="130" class="fill-customPrimary"><g><path d="M162.687 53.728c23.627-12.166 42.22.847 48.036 6.853 11.578 11.955 10.48 30.415 11.658 48.188 12.12-3.146 26.105-7.072 34.378 9.363 9.276 18.428 3.787 54.38-15.921 54.782-63.691 1.299-127.395 1.095-191.092.786-15.314-.075-32.243-9.59-37.367-31.142-6.931-29.156 1.265-57.634 24.817-67.25 4.8-1.96 22.403-5.565 22.976-6.84 7.87-17.507 22.75-30.898 51.743-30.795 33.427.119 47.484 6.998 50.772 16.055z"></path><g fill="#fff"><path d="M335.111 52.625l-31.125-17.25c-1.563-.875-2.602-1.656-3.118-2.344-.515-.687-.773-1.562-.773-2.625 0-1.343.484-2.5 1.453-3.468.969-.97 2.109-1.454 3.422-1.454.812 0 2.062.453 3.75 1.36l46.359 25.781-46.359 25.781c-1.688.938-2.938 1.406-3.75 1.406-1.313 0-2.453-.484-3.422-1.453-.969-.968-1.453-2.14-1.453-3.515 0-1.063.258-1.938.773-2.625.516-.688 1.555-1.469 3.118-2.344l31.125-17.25zM410.173 108.828h-52.781c-2.313 0-3.961-.437-4.946-1.312-.984-.875-1.476-2.032-1.476-3.469 0-1.438.492-2.602 1.476-3.492.985-.89 2.633-1.336 4.946-1.336h52.781c2.281 0 3.914.445 4.898 1.336.985.89 1.477 2.054 1.477 3.492 0 1.406-.484 2.555-1.453 3.445-.969.891-2.609 1.336-4.922 1.336zM457.251 25.625c.594-.813 1.242-1.422 1.945-1.828a4.47 4.47 0 012.274-.61c1.406 0 2.555.485 3.445 1.454.891.968 1.336 2.609 1.336 4.922v8.156c0 2.312-.445 3.96-1.336 4.945-.89.984-2.039 1.477-3.445 1.477-1.281 0-2.313-.36-3.094-1.078-.781-.72-1.359-2.063-1.734-4.032-.219-1.312-.656-2.328-1.313-3.047-1.281-1.406-3.07-2.53-5.367-3.375-2.297-.843-4.601-1.265-6.914-1.265-2.875 0-5.516.625-7.922 1.875-2.406 1.25-4.531 3.281-6.375 6.093-1.844 2.813-2.765 6.157-2.765 10.032v6.234c0 4.625 1.679 8.484 5.039 11.578 3.359 3.094 8.023 4.64 13.992 4.64 3.562 0 6.578-.484 9.047-1.452 1.437-.563 2.968-1.672 4.593-3.328 1-1 1.782-1.649 2.344-1.946.563-.297 1.203-.445 1.922-.445 1.281 0 2.406.484 3.375 1.453.969.969 1.453 2.11 1.453 3.422 0 1.313-.656 2.719-1.969 4.219-1.906 2.187-4.359 3.906-7.359 5.156-4.031 1.688-8.484 2.531-13.359 2.531-5.688 0-10.813-1.172-15.375-3.515-3.688-1.875-6.828-4.836-9.422-8.883-2.594-4.047-3.891-8.461-3.891-13.242V49.25c0-5 1.164-9.664 3.492-13.992 2.328-4.328 5.555-7.664 9.68-10.008 4.125-2.344 8.5-3.516 13.125-3.516 2.781 0 5.383.32 7.805.961a24.443 24.443 0 016.773 2.93zM525.751 59.516c0 3.687-1.023 7.257-3.07 10.71-2.047 3.454-5.094 6.204-9.141 8.25-4.047 2.047-8.273 3.07-12.679 3.07-4.375 0-8.563-1.007-12.563-3.023-4-2.015-7.047-4.757-9.141-8.226-2.093-3.469-3.14-7.094-3.14-10.875 0-3.844 1.062-7.617 3.187-11.32 2.125-3.704 5.18-6.618 9.164-8.743 3.985-2.125 8.149-3.187 12.493-3.187 4.375 0 8.585 1.086 12.632 3.258 4.047 2.172 7.102 5.093 9.164 8.765 2.063 3.672 3.094 7.446 3.094 11.32zm-9.609.047c0-3.094-1.11-5.938-3.328-8.532-3.032-3.5-7.016-5.25-11.953-5.25-4.344 0-7.969 1.39-10.875 4.172-2.907 2.781-4.36 6-4.36 9.656 0 3 1.469 5.805 4.406 8.414 2.938 2.61 6.547 3.915 10.829 3.915 4.312 0 7.937-1.305 10.875-3.915 2.937-2.609 4.406-5.43 4.406-8.46zM581.454 19.203v51.188h1.641c2.281 0 3.922.445 4.922 1.336 1 .89 1.5 2.054 1.5 3.492 0 1.406-.492 2.554-1.477 3.445-.984.89-2.633 1.336-4.945 1.336h-11.25v-2.344a28.448 28.448 0 01-6.867 2.906 27.938 27.938 0 01-7.43.985c-7.219 0-13.031-2.086-17.437-6.258-4.407-4.172-6.61-9.367-6.61-15.586 0-6.5 2.313-12.047 6.938-16.64 4.625-4.594 10.265-6.891 16.922-6.891 2.5 0 4.953.383 7.359 1.148 2.406.766 4.781 1.914 7.125 3.446V28.813h-1.641c-2.312 0-3.961-.446-4.945-1.336-.984-.891-1.477-2.04-1.477-3.446 0-1.437.493-2.601 1.477-3.492.984-.89 2.633-1.336 4.945-1.336h11.25zm-9.609 40.781c0-3.968-1.391-7.328-4.172-10.078-2.781-2.75-6.187-4.125-10.219-4.125-4 0-7.39 1.375-10.172 4.125-2.781 2.75-4.171 6.063-4.171 9.938 0 3.531 1.25 6.43 3.75 8.695 2.5 2.266 6.031 3.398 10.593 3.398 4.532 0 8.063-1.132 10.594-3.398 2.531-2.266 3.797-5.117 3.797-8.555zM642.126 63.594h-39.422c1 2.5 2.774 4.515 5.321 6.047 2.546 1.53 5.992 2.296 10.336 2.296 3.562 0 8.296-.765 14.203-2.296 2.437-.625 4.125-.938 5.062-.938 1.281 0 2.36.453 3.235 1.36.875.906 1.312 2.046 1.312 3.421 0 1.25-.469 2.313-1.406 3.188-1.25 1.156-4.297 2.258-9.141 3.305-4.844 1.046-9.5 1.57-13.969 1.57-7.687 0-13.836-2.172-18.445-6.516-4.609-4.344-6.914-9.687-6.914-16.031 0-6.75 2.492-12.242 7.477-16.477 4.984-4.234 10.726-6.351 17.226-6.351 3.906 0 7.492.687 10.758 2.062 3.266 1.375 5.695 2.86 7.289 4.453 2.25 2.313 4.109 5.172 5.578 8.579 1 2.375 1.5 5.125 1.5 8.25v4.078zm-10.64-9.61c-1.469-2.75-3.391-4.804-5.766-6.164-2.375-1.36-5.203-2.039-8.484-2.039-3.25 0-6.063.68-8.438 2.04-2.375 1.359-4.312 3.413-5.812 6.163h28.5zM315.048 167.297v12.094h3.469c2.312 0 3.961.445 4.945 1.336.984.89 1.477 2.054 1.477 3.492 0 1.406-.493 2.554-1.477 3.445-.984.891-2.633 1.336-4.945 1.336h-14.578c-2.313 0-3.961-.445-4.946-1.336-.984-.891-1.476-2.055-1.476-3.492 0-1.406.5-2.555 1.5-3.445 1-.891 2.64-1.336 4.922-1.336h1.5v-37.594h-1.5c-2.313 0-3.961-.445-4.946-1.336-.984-.891-1.476-2.055-1.476-3.492 0-1.438.492-2.602 1.476-3.492.985-.891 2.633-1.336 4.946-1.336l21.75.047c6.781 0 12.039 1.679 15.773 5.039 3.734 3.359 5.602 7.445 5.602 12.257 0 3-.875 5.727-2.625 8.18-1.75 2.453-4.391 4.633-7.922 6.539 2.031 1.781 4.203 4.063 6.515 6.844 1.438 1.781 3.375 4.562 5.813 8.344 2.437 0 4.047.25 4.828.75 1.406.968 2.109 2.328 2.109 4.078 0 1.406-.484 2.554-1.453 3.445-.968.891-2.609 1.336-4.922 1.336h-5.484c-7.781-12.031-14.234-19.266-19.359-21.703h-9.516zm0-9.609h7.5c2.781 0 5.266-.422 7.453-1.266 2.938-1.125 4.914-2.313 5.93-3.563 1.015-1.25 1.523-2.484 1.523-3.703 0-1.812-.968-3.492-2.906-5.039-1.937-1.547-4.766-2.32-8.484-2.32h-11.016v15.891zM407.689 172.594h-39.422c1 2.5 2.773 4.515 5.32 6.047 2.547 1.531 5.992 2.297 10.336 2.297 3.563 0 8.297-.766 14.203-2.297 2.438-.625 4.125-.938 5.063-.938 1.281 0 2.359.453 3.234 1.359.875.907 1.313 2.047 1.313 3.422 0 1.25-.469 2.313-1.407 3.188-1.25 1.156-4.297 2.258-9.14 3.305-4.844 1.046-9.5 1.57-13.969 1.57-7.688 0-13.836-2.172-18.445-6.516-4.61-4.344-6.914-9.687-6.914-16.031 0-6.75 2.492-12.242 7.476-16.477 4.984-4.234 10.727-6.351 17.227-6.351 3.906 0 7.492.687 10.757 2.062 3.266 1.375 5.696 2.86 7.29 4.454 2.25 2.312 4.109 5.171 5.578 8.578 1 2.375 1.5 5.125 1.5 8.25v4.078zm-10.641-9.61c-1.469-2.75-3.391-4.804-5.766-6.164-2.375-1.359-5.203-2.039-8.484-2.039-3.25 0-6.062.68-8.437 2.039-2.375 1.36-4.313 3.414-5.813 6.164h28.5zM427.345 146.438v2.718c1.562-1.531 2.976-2.586 4.242-3.164 1.266-.578 2.727-.867 4.383-.867 1.406 0 2.797.344 4.172 1.031 1.375.688 2.719 1.719 4.031 3.094 1.656-1.375 3.336-2.398 5.039-3.07a14.124 14.124 0 015.227-1.008c3.562 0 6.453.953 8.672 2.859 2.937 2.5 4.406 5.781 4.406 9.844v21.516c2 0 3.484.453 4.453 1.359.969.906 1.453 2.062 1.453 3.469 0 1.406-.484 2.554-1.453 3.445-.969.891-2.609 1.336-4.922 1.336h-9.141v-30.328c0-1.469-.265-2.484-.796-3.047-.532-.563-1.344-.844-2.438-.844a5.492 5.492 0 00-2.953.844c-1.156.781-2.563 2.25-4.219 4.406v19.36c2 0 3.485.453 4.453 1.359.969.906 1.453 2.062 1.453 3.469 0 1.406-.484 2.554-1.453 3.445-.968.891-2.609 1.336-4.922 1.336h-9.14v-30.328c0-1.438-.274-2.445-.821-3.024-.546-.578-1.367-.867-2.46-.867-1.125 0-2.235.352-3.329 1.055-1.093.703-2.406 2.101-3.937 4.195v19.36c2 0 3.492.453 4.476 1.359.985.906 1.477 2.062 1.477 3.469 0 1.406-.492 2.554-1.477 3.445-.984.891-2.632 1.336-4.945 1.336h-8.672c-2.312 0-3.961-.445-4.945-1.336-.984-.891-1.477-2.055-1.477-3.492 0-1.406.485-2.555 1.454-3.445.968-.891 2.468-1.336 4.5-1.336v-23.344c-2.032 0-3.532-.453-4.5-1.359-.969-.907-1.454-2.063-1.454-3.469 0-1.407.493-2.555 1.477-3.446.984-.89 2.633-1.335 4.945-1.335h9.141zM525.751 168.516c0 3.687-1.023 7.257-3.07 10.711-2.047 3.453-5.094 6.203-9.141 8.25-4.047 2.046-8.273 3.07-12.679 3.07-4.375 0-8.563-1.008-12.563-3.024-4-2.015-7.047-4.757-9.141-8.226-2.093-3.469-3.14-7.094-3.14-10.875 0-3.844 1.062-7.617 3.187-11.32 2.125-3.704 5.18-6.618 9.164-8.743 3.985-2.125 8.149-3.187 12.493-3.187 4.375 0 8.585 1.086 12.632 3.258 4.047 2.172 7.102 5.093 9.164 8.765 2.063 3.672 3.094 7.446 3.094 11.321zm-9.609.046c0-3.093-1.11-5.937-3.328-8.531-3.032-3.5-7.016-5.25-11.953-5.25-4.344 0-7.969 1.391-10.875 4.172-2.907 2.781-4.36 6-4.36 9.656 0 3 1.469 5.805 4.406 8.414 2.938 2.61 6.547 3.915 10.829 3.915 4.312 0 7.937-1.305 10.875-3.915 2.937-2.609 4.406-5.429 4.406-8.461zM557.032 156.047v19.265c0 2.063.422 3.422 1.266 4.079 1.313 1.031 3.656 1.547 7.031 1.547 4.907 0 9.438-1.047 13.594-3.141 1.594-.813 2.844-1.219 3.75-1.219 1.25 0 2.336.469 3.258 1.406.922.938 1.383 2.078 1.383 3.422 0 1.25-.5 2.328-1.5 3.235-1.532 1.468-4.555 2.82-9.071 4.054-4.515 1.235-8.32 1.852-11.414 1.852-5.968 0-10.445-1.289-13.429-3.867-2.985-2.578-4.477-5.742-4.477-9.492v-21.141h-3.469c-2.312 0-3.961-.445-4.945-1.336-.984-.891-1.477-2.055-1.477-3.492 0-1.407.493-2.555 1.477-3.446.984-.89 2.633-1.335 4.945-1.335h3.469v-8.672c0-2.313.445-3.961 1.336-4.946.891-.984 2.055-1.476 3.492-1.476 1.406 0 2.555.492 3.445 1.476.891.985 1.336 2.633 1.336 4.946v8.672h17.766c2.313 0 3.961.445 4.945 1.335.985.891 1.477 2.055 1.477 3.493 0 1.406-.492 2.554-1.477 3.445-.984.891-2.632 1.336-4.945 1.336h-17.766zM642.126 172.594h-39.422c1 2.5 2.774 4.515 5.321 6.047 2.546 1.531 5.992 2.297 10.336 2.297 3.562 0 8.296-.766 14.203-2.297 2.437-.625 4.125-.938 5.062-.938 1.281 0 2.36.453 3.235 1.359.875.907 1.312 2.047 1.312 3.422 0 1.25-.469 2.313-1.406 3.188-1.25 1.156-4.297 2.258-9.141 3.305-4.844 1.046-9.5 1.57-13.969 1.57-7.687 0-13.836-2.172-18.445-6.516-4.609-4.344-6.914-9.687-6.914-16.031 0-6.75 2.492-12.242 7.477-16.477 4.984-4.234 10.726-6.351 17.226-6.351 3.906 0 7.492.687 10.758 2.062 3.266 1.375 5.695 2.86 7.289 4.454 2.25 2.312 4.109 5.171 5.578 8.578 1 2.375 1.5 5.125 1.5 8.25v4.078zm-10.64-9.61c-1.469-2.75-3.391-4.804-5.766-6.164-2.375-1.359-5.203-2.039-8.484-2.039-3.25 0-6.063.68-8.438 2.039-2.375 1.36-4.312 3.414-5.812 6.164h28.5z"></path></g></g></svg></div></div></a></div><div style="opacity:0"><div class="hidden lg:flex h-full pl-12 pb-2"><a class="navbar-link" href="/#home" aria-label="Home">Home</a><a class="navbar-link" href="/#features" aria-label="Features">Features</a><a class="navbar-link" href="/#signup" aria-label="Sign Up" hidden="">Sign Up</a><a class="navbar-link" href="/#faq" aria-label="FAQ">FAQ</a><a class="navbar-link" href="/blog" aria-label="Blog">Blog</a></div></div><div style="opacity:0"><div class="grow basis-0 justify-end hidden lg:flex"><a class="text-white custom-border-gray rounded-xl
           bg-customDarkBg2 hover:bg-customDarkBg3  border-gray-700 pl-6 pr-8 pt-2 pb-2 text-sm flex" href="https://github.com/coderemotedotdev/rustc-profiles" target="_blank" aria-label="rustc performance profiles"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="w-6 h-6 mr-3 fill-gray-400"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><span class="pt-1">Our custom, faster rustc</span></a></div></div><div class="lg:hidden flex flex-col px-2 py-3 border-solid border border-gray-600 rounded-md cursor-pointer hover:bg-customDarkBg2"><div class="w-5 h-0.5 bg-gray-500  mb-1"></div><div class="w-5 h-0.5 bg-gray-500  mb-1"></div><div class="w-5 h-0.5 bg-gray-500 "></div></div></div></nav><!--astro:end--></astro-island> <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo> <img src="/faster_rust_compiler_macro_expansion_caching.gif" alt="Incremental Rust builds just became up to 40% faster ... with one new feature." data-astro-cid-bvzihdzo width="1020" height="510" loading="lazy" decoding="async"> </div> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2024-03-16T07:00:00.000Z"> Mar 16, 2024 </time>  </div> <h1 data-astro-cid-bvzihdzo>How I reduced (incremental) Rust compile times by up to 40%</h1> <hr data-astro-cid-bvzihdzo> </div>  <p>At CodeRemote, I have forked and modified the Rust compiler, <code>rustc</code> itself. One feature — caching procedural macro expansion — has yielded 11-40% faster incremental build times in several real-life crates. That means faster dev builds and less laggy rust-analyzer (IDE IntelliSense).</p>
<p>If you’re a Rust compiler performance pro, feel free to <a href="#caching-macro-expansion-up-to-40-faster-rust-incremental-builds">skip to what I did</a>. Otherwise, keep reading for more context!</p>
<h2 id="rust-compilation-can-be-slow">Rust compilation can be slow…</h2>
<p>There is a lot to like about the Rust language, but it’s a bit of a meme how frequent a complaint is compile time … so much so that “I’m feeling lucky” drops you into this poor guy’s support group:
<img src="/rust_compile_time_google_search.png" alt="Google top hits for Rust compile time"/></p>
<p>While writing code, all developers want the shortest possible edit-compile-run cycle. Faster feedback = Higher productivity. While Go developers often take for granted their fast incremental builds, their Rust counterparts often take for granted their <em>slow</em> incremental builds — developing more learned helplessness than code.</p>
<h4 id="side-note-what-is-an-incremental-build">Side note: What is an incremental build?</h4>
<p>Say you just downloaded a Rust codebase and compiled it. That is a “clean build” since the compiler had to process that code from scratch.</p>
<p>Now say you already did a clean build, changed a couple lines, and then re-compiled. This is what I call an “incremental build”. In a day, a developer can do hundreds of incremental builds (repeat this cycle: make a code edit, compile, and sometimes run/test). Seconds add up fast.</p>
<h3 id="existing-compiler-options-offer-limited-help-with-incremental-build-times">Existing compiler options offer limited help with incremental build times</h3>
<p><strong>The good news:</strong> Rust offers many (often unstable) features that can optimize compiler behavior. Numerous blog posts<sup><a href="#user-content-fn-corrode-blog" id="user-content-fnref-corrode-blog" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup> <sup><a href="#user-content-fn-lattimore-blog" id="user-content-fnref-lattimore-blog" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup> <sup><a href="#user-content-fn-benw-blog" id="user-content-fnref-benw-blog" data-footnote-ref="" aria-describedby="footnote-label">3</a></sup> in just the past few months cite a laundry list of configurations to reduce Rust compile times:</p>
<ol>
<li>Use the lld or mold linker</li>
<li>Use the Cranelift codegen backend</li>
<li>Build non-relocatable executables</li>
<li>Strip debug info</li>
<li>Enable the parallel frontend</li>
<li>Use release (optimized) builds for procedural macro crates</li>
</ol>
<p><strong>The bad news:</strong> These options are of limited help with respect to incremental build times.</p>
<ul>
<li>Options 1 - 4 above optimize code generation. If you are building an executable (via <code>cargo build</code>), these can help! Most developers (including myself), however, just want to know if their code <em>can compile</em> (i.e. <code>cargo check</code> or <code>cargo clippy</code>) while coding. They are not interested in producing an executable, and thus codegen optimizations are of zero help.</li>
<li>Option 5 brings intraprocess parallelization. It can significantly speed up clean dev builds<sup><a href="#user-content-fn-parallel-frontend" id="user-content-fnref-parallel-frontend" data-footnote-ref="" aria-describedby="footnote-label">4</a></sup> — provided of course that your machine has that enough CPU and memory. That said, personally I have noticed negligible improvement in incremental builds because the parallelized ‘analysis’ phase is far shorter than that in clean builds.</li>
<li>Option 6 introduces an interesting premise: expanding procedural macros is slow! This solution comes at a tangible cost though, as a release build of a procedural macro crate is considerably slower than a dev build.</li>
</ul>
<h3 id="youre-probably-spending-considerable-build-time-expanding-procedural-macros">You’re probably spending considerable build time expanding procedural macros</h3>
<p>Procedural macros are Rust ‘meta-functions’ that modify user-written code. Crudely, <code>fn procmacro(user_code: string) -&gt; /* output_code */ string</code>.<sup><a href="#user-content-fn-procmacro-summary" id="user-content-fnref-procmacro-summary" data-footnote-ref="" aria-describedby="footnote-label">5</a></sup> Executing this meta-function is called macro expansion, and <code>macro_expand_crate</code> (which you see in the profile at the top of this blog) is the very first step to compilation. Importantly, if you change a <em>single line</em> in your crate, <em>all</em> macros in that crate are expanded from scratch. Unlike the rest of the compiler,<sup><a href="#user-content-fn-the-compiler-caches" id="user-content-fnref-the-compiler-caches" data-footnote-ref="" aria-describedby="footnote-label">6</a></sup> there is no caching here.</p>
<p>Why should you care? You likely don’t write (m)any procedural macros yourself, but I suspect they are used extensively in your crate dependencies. A few popular macro-heavy crates include <code>serde</code>, <code>tokio</code>, <code>sqlx</code>, <code>actix-web</code>, <code>leptos</code>, <code>wasm-bindgen</code>, <code>async-[attributes / graphql / trait / stripe]</code>. Long build times are a common talking point on these crates’ GitHub repositories: <sup><a href="#user-content-fn-sqlx-slow-build" id="user-content-fnref-sqlx-slow-build" data-footnote-ref="" aria-describedby="footnote-label">7</a></sup> <sup><a href="#user-content-fn-asyncgraphql-slow-build" id="user-content-fnref-asyncgraphql-slow-build" data-footnote-ref="" aria-describedby="footnote-label">8</a></sup> <sup><a href="#user-content-fn-asyncstripe-slow-build" id="user-content-fnref-asyncstripe-slow-build" data-footnote-ref="" aria-describedby="footnote-label">9</a></sup>
<img src="/slow_sqlx_macros.png" alt="Resigned to slow sqlx macro expansion"/></p>
<p><strong>tldr;</strong> slow macro expansion from your dependencies means slow builds for you.</p>
<h2 id="caching-macro-expansion-up-to-40-faster-rust-incremental-builds">Caching macro expansion: Up to 40% faster Rust incremental builds</h2>
<p>There are many clever individuals and teams dedicated to holistically improving the Rust compiler. These days, the best improvements yield 1-2% faster builds on benchmarks.<sup><a href="#user-content-fn-nethercote-blog" id="user-content-fnref-nethercote-blog" data-footnote-ref="" aria-describedby="footnote-label">10</a></sup>. Unfortunately, a 1-2% improvement doesn’t mean much to a frustrated developer.</p>
<h3 id="my-approach-project-specific-focus-on-incremental-build-time">My approach: Project-specific focus on incremental build time</h3>
<p>My approach, which is now the basis for CodeRemote, is necessarily different:</p>
<ol>
<li>I am singularly focused on shortening the edit-compile-run cycle. Goal: Make incremental dev builds fast.</li>
<li>I want big (double-digit %) improvements on a few projects, not small improvements on many. Approach: Profile a project with painfully long incremental builds, understand the cause for slowness, fix it.</li>
</ol>
<h3 id="methods-speeding-up-macro-expansion">Methods: Speeding up macro expansion</h3>
<p>Early on, I saw several projects dependent on <code>async-graphql</code> and <code>sqlx</code> complain about slow build times. After profiling them, I found that macro expansion would sometimes take more than a third of that time. From my reading, I speculated that this was a relatively under-optimized part of the compiler.</p>
<h4 id="approaches-considered-and-abandoned">Approaches considered and abandoned</h4>
<details><summary><b>Click to read my attempts before caching macro expansion.</b></summary><p>I evaluated (and ultimately abandoned) a few approaches:</p><ol>
<li>Parallelize macro expansion: The compiler currently loops over macro invocations repeatedly until all names are resolved and nested macros are expanded from the inside out. While I believe parallelization is doable, nested macros and name resolution pose serious challenges to a naive approach.</li>
<li>Apply the Watt runtime<sup><a href="#user-content-fn-watt" id="user-content-fnref-watt" data-footnote-ref="" aria-describedby="footnote-label">11</a></sup> i.e. compile procedural macros to WebAssembly: I quickly realized that while Watt saves users from needing to compile procedural macros, it does not help with execution of those macros during expansion (and in fact incurs a slight performance penalty). Nevertheless, Watt pushed me to focus on macros modelable as pure deterministic functions.</li>
<li>Cache the AST and “push” changes: Assuming small edits between builds, the AST (Abstract Syntax Tree) that represents a crate changes very slightly. Nevertheless, the compiler currently lexes and parses and expands from scratch.<sup><a href="#user-content-fn-technical-macro-exp" id="user-content-fnref-technical-macro-exp" data-footnote-ref="" aria-describedby="footnote-label">12</a></sup> My vague idea here was to cache the AST from the last run, identify the code changes in the new version, and push those AST changes to the previous crate’s AST. This felt like it was on the right track but the devil is in the details:
<ul>
<li>How would I represent “code changes”?</li>
<li>What if the new AST is vastly different from the old one?</li>
<li>Are parsing and lexing even time-consuming i.e. is there any benefit from caching them?</li>
</ul>
</li>
</ol></details>
<h4 id="caching-procedural-macro-expansion">Caching procedural macro expansion</h4>
<p>Finally, I landed at caching procedural macro expansion. The core idea is simple. Procedural macros take as input a <code>TokenStream</code> (representing an AST) and output another <code>TokenStream</code>. The compiler will cache this mapping from your current build; if the input is unchanged in your next build, it reuses that output instead of recomputing it.</p>
<p>This is far superior to “using release builds of procedural macro crates” <a href="#existing-compiler-options-offer-limited-help-with-incremental-build-times">mentioned before</a>. For the vast majority of macros, instead of doing the same work faster, the compiler does <em>zero work</em>.</p>
<h5 id="side-note-side-effects">Side note: Side effects</h5>
<p>Rust’s procedural macros are not necessarily deterministic “pure” functions.<sup><a href="#user-content-fn-hn-side-effects" id="user-content-fnref-hn-side-effects" data-footnote-ref="" aria-describedby="footnote-label">13</a></sup> In other words, expanding the macro with the same input can yield a different output. The commonly used <code>include_bytes</code> macro, for example, reads the contents of a file. Even if the filename stays the same, its output will clearly change if the <em>contents</em> of that file change.</p>
<p>In practice, however, the vast majority of macros are in fact pure. This is the basis of the Watt runtime <a href="#approaches-considered-and-abandoned">mentioned before</a> and also the basis of periodic discussions on “const” proc macros.<sup><a href="#user-content-fn-const-proc-macro" id="user-content-fnref-const-proc-macro" data-footnote-ref="" aria-describedby="footnote-label">14</a></sup></p>
<h5 id="augmenting-the-compiler">Augmenting the compiler</h5>
<p>I needed to augment the compiler in several ways to support macro expansion caching. In particular, the compiler needed to be able to do the following:</p>
<ol>
<li>Skip pulling a macro from cache. As mentioned above, you may want to avoid caching some macro expansions in case they have side effects. I simply allow specifying these in an environment variable. In practice, I have yet to encounter a crate where I have needed to skip more than 3 macros.</li>
<li>Hash macro (bang, attribute, and derive) invocations. The macro expansion cache is a hashmap, mapping invocation hashes to the expansions. As in the other areas of the compiler, I need to take care to use <code>StableHash</code>es, so that the hashes are consistent across runs. On this, I avoided hashing <code>span</code>s (which represent positions in code) where possible because ideally the cache remains valid even if a new line of code pushes the code below it down a line.</li>
<li>Handle edge cases: duplicate invocation hashes, interpolated tokens<sup><a href="#user-content-fn-interpolated-tokens" id="user-content-fnref-interpolated-tokens" data-footnote-ref="" aria-describedby="footnote-label">15</a></sup>, and nested macros. All of these poses challenges to computing unique invocation hashes and consistent output ASTs. I typically flattened ASTs where possible and dropped un-cacheable ones where not.</li>
<li>Serialize macro output. Luckily, I was able to leverage a lot of the data structures in place for incremental builds downstream in the compiler. Still, I needed to spin my own serialization mechanism since I am newly caching <code>TokenStreams</code> and ASTs.</li>
</ol>
<h4 id="code-snippet">Code snippet</h4>
<p>If that felt vague, attached here is a code snippet of my core logic.</p>
<details><summary><b>Click to expand a snippet from my actual code</b></summary><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#F97583">pub</span><span style="color:#F97583"> fn</span><span style="color:#B392F0"> expand_crate</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">&amp;mut</span><span style="color:#79B8FF"> self</span><span style="color:#E1E4E8">, krate</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ast</span><span style="color:#F97583">::</span><span style="color:#B392F0">Crate</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">-&gt;</span><span style="color:#B392F0"> ast</span><span style="color:#F97583">::</span><span style="color:#B392F0">Crate</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  // ... Truncated ... //</span></span>
<span class="line"><span style="color:#F97583">  let</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">mut</span><span style="color:#E1E4E8"> krate_ast_fragment_with_placeholders, </span><span style="color:#F97583">mut</span><span style="color:#E1E4E8"> invocations) </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#79B8FF">    self</span><span style="color:#F97583">.</span><span style="color:#B392F0">collect_invocations</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">AstFragment</span><span style="color:#F97583">::</span><span style="color:#B392F0">Crate</span><span style="color:#E1E4E8">(krate), </span><span style="color:#F97583">&amp;</span><span style="color:#E1E4E8">[]);</span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#F97583">  loop</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> (invoc, ext) </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> invocations</span><span style="color:#F97583">.</span><span style="color:#B392F0">pop</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#6A737D">    // Gather newly discovered nested invocations and expanded fragments</span></span>
<span class="line"><span style="color:#F97583">    let</span><span style="color:#E1E4E8"> (expanded_fragment, new_invocations) </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> self</span><span style="color:#F97583">.</span><span style="color:#B392F0">expand_invoc</span><span style="color:#E1E4E8">(invoc, </span><span style="color:#F97583">&amp;</span><span style="color:#E1E4E8">ext</span><span style="color:#F97583">.</span><span style="color:#E1E4E8">kind);</span></span>
<span class="line"><span style="color:#E1E4E8">    invocations</span><span style="color:#F97583">.</span><span style="color:#B392F0">extend</span><span style="color:#E1E4E8">(new_invocations</span><span style="color:#F97583">.</span><span style="color:#B392F0">into_iter</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">.</span><span style="color:#B392F0">rev</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // Insert expanded fragments into the crate AST&#39;s placeholders</span></span>
<span class="line"><span style="color:#6A737D">  // let expanded_krate = ...</span></span>
<span class="line"><span style="color:#F97583">  let</span><span style="color:#E1E4E8"> bytes </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> on_disk_cache</span><span style="color:#F97583">.</span><span style="color:#B392F0">serialize</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#E1E4E8">    file_encoder,</span></span>
<span class="line"><span style="color:#F97583">    &amp;</span><span style="color:#79B8FF">self</span><span style="color:#F97583">.</span><span style="color:#E1E4E8">invoc_hash_and_expanded_stream</span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#B392F0">  info!</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#9ECBFF">    &quot;Cached {} bytes of macro expansion cache (holding {} invocations)&quot;</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    bytes,</span></span>
<span class="line"><span style="color:#79B8FF">    self</span><span style="color:#F97583">.</span><span style="color:#E1E4E8">invoc_hash_and_expanded_stream</span><span style="color:#F97583">.</span><span style="color:#B392F0">len</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">  expanded_krate</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">fn</span><span style="color:#B392F0"> expand_macro_invoc</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#F97583">  &amp;mut</span><span style="color:#79B8FF"> self</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  invoc</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Invocation</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// holds macro invocation context</span></span>
<span class="line"><span style="color:#E1E4E8">  ext</span><span style="color:#F97583">:</span><span style="color:#F97583"> &amp;</span><span style="color:#B392F0">SyntaxExtensionKind</span><span style="color:#E1E4E8">, </span><span style="color:#6A737D">// holds the procedural macro callable</span></span>
<span class="line"><span style="color:#E1E4E8">) </span><span style="color:#F97583">-&gt;</span><span style="color:#B392F0"> TokenStream</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  // ... Truncated ... //</span></span>
<span class="line"><span style="color:#F97583">  let</span><span style="color:#E1E4E8"> invoc_hash </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#79B8FF">    self</span><span style="color:#F97583">.</span><span style="color:#E1E4E8">disk_cache</span><span style="color:#F97583">.</span><span style="color:#B392F0">as_ref</span><span style="color:#E1E4E8">()</span><span style="color:#F97583">.</span><span style="color:#B392F0">and_then</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">|</span><span style="color:#E1E4E8">_</span><span style="color:#F97583">|</span><span style="color:#79B8FF"> self</span><span style="color:#F97583">.</span><span style="color:#B392F0">hash_item_no_spans</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">&amp;</span><span style="color:#E1E4E8">invoc</span><span style="color:#F97583">.</span><span style="color:#E1E4E8">kind));</span></span>
<span class="line"><span style="color:#F97583">  let</span><span style="color:#E1E4E8"> expander </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> ext</span><span style="color:#F97583">.</span><span style="color:#B392F0">get_macro</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">  let</span><span style="color:#E1E4E8"> tok_result</span><span style="color:#F97583">:</span><span style="color:#B392F0"> TokenStream</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">    // 1. Perform lookup of the macro invocation hash in the new macro cache</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#F97583"> !</span><span style="color:#79B8FF">self</span><span style="color:#F97583">.</span><span style="color:#B392F0">should_skip_cache</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">        &amp;&amp;</span><span style="color:#F97583"> let</span><span style="color:#B392F0"> Some</span><span style="color:#E1E4E8">(cached_stream) </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#79B8FF">            self</span><span style="color:#F97583">.</span><span style="color:#E1E4E8">disk_cache</span></span>
<span class="line"><span style="color:#F97583">                .</span><span style="color:#B392F0">as_ref</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">                .</span><span style="color:#B392F0">unwrap</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#F97583">                .</span><span style="color:#B392F0">try_load_query_result</span><span style="color:#F97583">::</span><span style="color:#E1E4E8">&lt;</span><span style="color:#B392F0">TokenStream</span><span style="color:#E1E4E8">&gt;(invoc_hash)</span></span>
<span class="line"><span style="color:#E1E4E8">    {</span></span>
<span class="line"><span style="color:#6A737D">        // 2a. Pull from cache if it exists</span></span>
<span class="line"><span style="color:#B392F0">        debug!</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;Pulled from cache with hash {:?}!&quot;</span><span style="color:#E1E4E8">, invoc_hash);</span></span>
<span class="line"><span style="color:#E1E4E8">        cached_stream</span></span>
<span class="line"><span style="color:#E1E4E8">    } </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">        // 2b. Else compute macro expansion from the proc macro crate</span></span>
<span class="line"><span style="color:#B392F0">        debug!</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;Not found in cache with hash {:?}!&quot;</span><span style="color:#E1E4E8">, invoc_hash);</span></span>
<span class="line"><span style="color:#E1E4E8">        expander</span><span style="color:#F97583">.</span><span style="color:#B392F0">expand</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">self</span><span style="color:#F97583">.</span><span style="color:#E1E4E8">cx, span, mac</span><span style="color:#F97583">.</span><span style="color:#E1E4E8">args</span><span style="color:#F97583">.</span><span style="color:#E1E4E8">tokens</span><span style="color:#F97583">.</span><span style="color:#B392F0">clone</span><span style="color:#E1E4E8">())</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"><span style="color:#6A737D">  // 3. Cache macro invocation hash with expanded TokenStream</span></span>
<span class="line"><span style="color:#79B8FF">  self</span><span style="color:#F97583">.</span><span style="color:#E1E4E8">invoc_hash_and_expanded_stream</span><span style="color:#F97583">.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">((invoc_hash, tok_result</span><span style="color:#F97583">.</span><span style="color:#B392F0">clone</span><span style="color:#E1E4E8">()));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">  tok_result</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre></details>
<h3 id="results">Results</h3>
<p>I have profiled my modded compiler against the default compiler, on several real-life Rust projects. Full details are in my
<a href="https://github.com/coderemotedotdev/rustc-profiles" target="_blank">rustc-profiles repo</a>.</p>
<p>Below is a snapshot of those results (as of Mar 16, 2024).</p>















































<table><thead><tr><th>Project</th><th>speed up %</th><th>Default build time</th><th>Modded build time</th><th>Detailed analysis?</th></tr></thead><tbody><tr><td><a href="https://hedgehog.app" target="_blank">hedgehog</a></td><td>40%</td><td>19.3 s</td><td>11.7 s</td><td><a href="https://github.com/coderemotedotdev/rustc-profiles/tree/main/hedgehog" target="_blank">In rustc-profiles</a></td></tr><tr><td><a href="https://github.com/paritytech/polkadot-sdk" target="_blank">polkadot-sdk</a></td><td>35%</td><td>30 s</td><td>19 s</td><td><a href="https://github.com/coderemotedotdev/rustc-profiles/tree/main/polkadot-sdk" target="_blank">In rustc-profiles</a></td></tr><tr><td><a href="https://github.com/SorellaLabs/brontes" target="_blank">brontes</a></td><td>25%</td><td>10.7 s</td><td>8.0 s</td><td><a href="https://github.com/coderemotedotdev/rustc-profiles/tree/main/brontes" target="_blank">In rustc-profiles</a></td></tr><tr><td><a href="https://github.com/graphprotocol/graph-node" target="_blank">graph-node</a></td><td>21%</td><td>6.3 s</td><td>5.0 s</td><td><a href="https://github.com/coderemotedotdev/rustc-profiles/tree/main/graph-node" target="_blank">In rustc-profiles</a></td></tr><tr><td><a href="https://github.com/vectordotdev/vector" target="_blank">vector</a></td><td>11%</td><td>18.4 s</td><td>16.4 s</td><td><a href="https://github.com/vectordotdev/vector/discussions/19930" target="_blank">In vector GitHub</a></td></tr></tbody></table>
<h4 id="proof-by-picture">Proof by picture</h4>
<p>As you can see in this <code>rustc</code> profile, my modded compiler expands only the procedural macros that were modified.
<img src="/rustc_optimization_onepager.png" alt="Rustc optimization one-pager"/>
You can find the full-sized PDF <a href="https://github.com/coderemotedotdev/rustc-profiles/blob/main/hedgehog/hedgehog_compiler_comparison_report.pdf">here</a>.</p>
<br/>
<hr/>
<br/>
<p>Now, I love sword fights on swivel chairs as much as the next guy …</p>
<div class="row" padding="1rem"><div class="column"><img src="https://imgs.xkcd.com/comics/compiling.png" alt="Image alt"/></div><div class="column"><div class="ml-embedded" data-form="6EiOYZ"></div></div></div>
<p>But if you want to return minutes of your life with every compile, check out what I’m building at CodeRemote.</p>
<p>~ Kapil</p>

<section data-footnotes="" class="footnotes"><h2 class="sr-only" id="footnote-label">Footnotes</h2>
<ol>
<li id="user-content-fn-corrode-blog">
<p><a href="https://corrode.dev/blog/tips-for-faster-rust-compile-times">https://corrode.dev/blog/tips-for-faster-rust-compile-times</a> <a href="#user-content-fnref-corrode-blog" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-lattimore-blog">
<p><a href="https://davidlattimore.github.io/posts/2024/02/04/speeding-up-the-rust-edit-build-run-cycle.html">https://davidlattimore.github.io/posts/2024/02/04/speeding-up-the-rust-edit-build-run-cycle.html</a> . I got to speak to David a few weeks ago, and learned he is hard at work building an <a href="https://github.com/davidlattimore/wild">incremental linker</a>. <a href="#user-content-fnref-lattimore-blog" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-benw-blog">
<p><a href="https://benw.is/posts/how-i-improved-my-rust-compile-times-by-seventy-five-percent">https://benw.is/posts/how-i-improved-my-rust-compile-times-by-seventy-five-percent</a> <a href="#user-content-fnref-benw-blog" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-parallel-frontend">
<p>The parallel frontend is still only in the nightly compiler, ostensibly with plans to hit stable rustc in late 2024. More details are <a href="https://blog.rust-lang.org/2023/11/09/parallel-rustc.html">here</a>. <a href="#user-content-fnref-parallel-frontend" data-footnote-backref="" aria-label="Back to reference 4" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-procmacro-summary">
<p>This is technically incorrect for a few reasons. Namely, inputs and outputs are <code>TokenStream</code> objects, which are more like ASTs than raw strings. Also, attribute procedural macros take two inputs (the attribute itself and the body it is attached to) instead of one. Nevertheless, it is a useful mental model for the more detailed explanation <a href="https://doc.rust-lang.org/reference/procedural-macros.html">here</a>. <a href="#user-content-fnref-procmacro-summary" data-footnote-backref="" aria-label="Back to reference 5" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-the-compiler-caches">
<p>Almost all of the compiler’s “frontend” (i.e. before the codegen phase) implements caching to drive incremental compilation. See more details on query-driven compilation <a href="https://rustc-dev-guide.rust-lang.org/query.html">here</a>. <a href="#user-content-fnref-the-compiler-caches" data-footnote-backref="" aria-label="Back to reference 6" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-sqlx-slow-build">
<p><a href="https://github.com/launchbadge/sqlx/issues/1096">https://github.com/launchbadge/sqlx/issues/1096</a> <a href="#user-content-fnref-sqlx-slow-build" data-footnote-backref="" aria-label="Back to reference 7" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-asyncgraphql-slow-build">
<p><a href="https://github.com/async-graphql/async-graphql/issues/1287">https://github.com/async-graphql/async-graphql/issues/1287</a> <a href="#user-content-fnref-asyncgraphql-slow-build" data-footnote-backref="" aria-label="Back to reference 8" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-asyncstripe-slow-build">
<p><a href="https://github.com/arlyon/async-stripe/discussions/77">https://github.com/arlyon/async-stripe/discussions/77</a> <a href="#user-content-fnref-asyncstripe-slow-build" data-footnote-backref="" aria-label="Back to reference 9" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-nethercote-blog">
<p>Nicholas Nethercote has written several excellent blogs summarizing recent compiler improvements. In those blogs, he also has demonstrated some of the best tools to measure Rust compiler performance. His March 2024 blog is <a href="https://nnethercote.github.io/2024/03/06/how-to-speed-up-the-rust-compiler-in-march-2024.html">here</a>. <a href="#user-content-fnref-nethercote-blog" data-footnote-backref="" aria-label="Back to reference 10" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-watt">
<p>David Tolnay is the author of Watt. See more details <a href="https://github.com/dtolnay/watt">here</a>. <a href="#user-content-fnref-watt" data-footnote-backref="" aria-label="Back to reference 11" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-technical-macro-exp">
<p>During macro expansion, a macro transforms an input AST into an output AST. This AST is then inserted into the crate’s larger AST. <a href="#user-content-fnref-technical-macro-exp" data-footnote-backref="" aria-label="Back to reference 12" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-hn-side-effects">
<p><a href="https://news.ycombinator.com/item?id=29302382">https://news.ycombinator.com/item?id=29302382</a> <a href="#user-content-fnref-hn-side-effects" data-footnote-backref="" aria-label="Back to reference 13" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-const-proc-macro">
<p><a href="https://internals.rust-lang.org/t/const-fn-proc-macros/14714">https://internals.rust-lang.org/t/const-fn-proc-macros/14714</a> <a href="#user-content-fnref-const-proc-macro" data-footnote-backref="" aria-label="Back to reference 14" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-interpolated-tokens">
<p>Interpolated tokens are embedded AST nodes. The <a href="https://github.com/rust-lang/rust/blob/1.76.0/compiler/rustc_ast/src/token.rs#L317">source code</a> itself deems them a “very strange” concept that the compiler team would “like to get rid of”. <a href="#user-content-fnref-interpolated-tokens" data-footnote-backref="" aria-label="Back to reference 15" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>  </div> </article> </main> <footer><div class="pt-10  lg:pt-10 lg:pb-10 bg-customDarkBg1 radius-for-skewed "><div class="container mx-auto px-4 w-4/5 md:w-11/12 lg:w-10/12 xl:w-4/5 2xl:w-2/3"><div class="flex flex-wrap  "><div class="w-full lg:w-1/3 mb-16 lg:mb-0"><div class="flex justify-center lg:justify-start items-center grow basis-0"><a class="text-white mr-2 text-6xl" href="/#home" aria-label="CodeRemote Home"><svg xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" clip-rule="evenodd" viewBox="0 0 655.944 211.604" width="180" height="130" class="fill-customPrimary"><g><path d="M162.687 53.728c23.627-12.166 42.22.847 48.036 6.853 11.578 11.955 10.48 30.415 11.658 48.188 12.12-3.146 26.105-7.072 34.378 9.363 9.276 18.428 3.787 54.38-15.921 54.782-63.691 1.299-127.395 1.095-191.092.786-15.314-.075-32.243-9.59-37.367-31.142-6.931-29.156 1.265-57.634 24.817-67.25 4.8-1.96 22.403-5.565 22.976-6.84 7.87-17.507 22.75-30.898 51.743-30.795 33.427.119 47.484 6.998 50.772 16.055z"></path><g fill="#fff"><path d="M335.111 52.625l-31.125-17.25c-1.563-.875-2.602-1.656-3.118-2.344-.515-.687-.773-1.562-.773-2.625 0-1.343.484-2.5 1.453-3.468.969-.97 2.109-1.454 3.422-1.454.812 0 2.062.453 3.75 1.36l46.359 25.781-46.359 25.781c-1.688.938-2.938 1.406-3.75 1.406-1.313 0-2.453-.484-3.422-1.453-.969-.968-1.453-2.14-1.453-3.515 0-1.063.258-1.938.773-2.625.516-.688 1.555-1.469 3.118-2.344l31.125-17.25zM410.173 108.828h-52.781c-2.313 0-3.961-.437-4.946-1.312-.984-.875-1.476-2.032-1.476-3.469 0-1.438.492-2.602 1.476-3.492.985-.89 2.633-1.336 4.946-1.336h52.781c2.281 0 3.914.445 4.898 1.336.985.89 1.477 2.054 1.477 3.492 0 1.406-.484 2.555-1.453 3.445-.969.891-2.609 1.336-4.922 1.336zM457.251 25.625c.594-.813 1.242-1.422 1.945-1.828a4.47 4.47 0 012.274-.61c1.406 0 2.555.485 3.445 1.454.891.968 1.336 2.609 1.336 4.922v8.156c0 2.312-.445 3.96-1.336 4.945-.89.984-2.039 1.477-3.445 1.477-1.281 0-2.313-.36-3.094-1.078-.781-.72-1.359-2.063-1.734-4.032-.219-1.312-.656-2.328-1.313-3.047-1.281-1.406-3.07-2.53-5.367-3.375-2.297-.843-4.601-1.265-6.914-1.265-2.875 0-5.516.625-7.922 1.875-2.406 1.25-4.531 3.281-6.375 6.093-1.844 2.813-2.765 6.157-2.765 10.032v6.234c0 4.625 1.679 8.484 5.039 11.578 3.359 3.094 8.023 4.64 13.992 4.64 3.562 0 6.578-.484 9.047-1.452 1.437-.563 2.968-1.672 4.593-3.328 1-1 1.782-1.649 2.344-1.946.563-.297 1.203-.445 1.922-.445 1.281 0 2.406.484 3.375 1.453.969.969 1.453 2.11 1.453 3.422 0 1.313-.656 2.719-1.969 4.219-1.906 2.187-4.359 3.906-7.359 5.156-4.031 1.688-8.484 2.531-13.359 2.531-5.688 0-10.813-1.172-15.375-3.515-3.688-1.875-6.828-4.836-9.422-8.883-2.594-4.047-3.891-8.461-3.891-13.242V49.25c0-5 1.164-9.664 3.492-13.992 2.328-4.328 5.555-7.664 9.68-10.008 4.125-2.344 8.5-3.516 13.125-3.516 2.781 0 5.383.32 7.805.961a24.443 24.443 0 016.773 2.93zM525.751 59.516c0 3.687-1.023 7.257-3.07 10.71-2.047 3.454-5.094 6.204-9.141 8.25-4.047 2.047-8.273 3.07-12.679 3.07-4.375 0-8.563-1.007-12.563-3.023-4-2.015-7.047-4.757-9.141-8.226-2.093-3.469-3.14-7.094-3.14-10.875 0-3.844 1.062-7.617 3.187-11.32 2.125-3.704 5.18-6.618 9.164-8.743 3.985-2.125 8.149-3.187 12.493-3.187 4.375 0 8.585 1.086 12.632 3.258 4.047 2.172 7.102 5.093 9.164 8.765 2.063 3.672 3.094 7.446 3.094 11.32zm-9.609.047c0-3.094-1.11-5.938-3.328-8.532-3.032-3.5-7.016-5.25-11.953-5.25-4.344 0-7.969 1.39-10.875 4.172-2.907 2.781-4.36 6-4.36 9.656 0 3 1.469 5.805 4.406 8.414 2.938 2.61 6.547 3.915 10.829 3.915 4.312 0 7.937-1.305 10.875-3.915 2.937-2.609 4.406-5.43 4.406-8.46zM581.454 19.203v51.188h1.641c2.281 0 3.922.445 4.922 1.336 1 .89 1.5 2.054 1.5 3.492 0 1.406-.492 2.554-1.477 3.445-.984.89-2.633 1.336-4.945 1.336h-11.25v-2.344a28.448 28.448 0 01-6.867 2.906 27.938 27.938 0 01-7.43.985c-7.219 0-13.031-2.086-17.437-6.258-4.407-4.172-6.61-9.367-6.61-15.586 0-6.5 2.313-12.047 6.938-16.64 4.625-4.594 10.265-6.891 16.922-6.891 2.5 0 4.953.383 7.359 1.148 2.406.766 4.781 1.914 7.125 3.446V28.813h-1.641c-2.312 0-3.961-.446-4.945-1.336-.984-.891-1.477-2.04-1.477-3.446 0-1.437.493-2.601 1.477-3.492.984-.89 2.633-1.336 4.945-1.336h11.25zm-9.609 40.781c0-3.968-1.391-7.328-4.172-10.078-2.781-2.75-6.187-4.125-10.219-4.125-4 0-7.39 1.375-10.172 4.125-2.781 2.75-4.171 6.063-4.171 9.938 0 3.531 1.25 6.43 3.75 8.695 2.5 2.266 6.031 3.398 10.593 3.398 4.532 0 8.063-1.132 10.594-3.398 2.531-2.266 3.797-5.117 3.797-8.555zM642.126 63.594h-39.422c1 2.5 2.774 4.515 5.321 6.047 2.546 1.53 5.992 2.296 10.336 2.296 3.562 0 8.296-.765 14.203-2.296 2.437-.625 4.125-.938 5.062-.938 1.281 0 2.36.453 3.235 1.36.875.906 1.312 2.046 1.312 3.421 0 1.25-.469 2.313-1.406 3.188-1.25 1.156-4.297 2.258-9.141 3.305-4.844 1.046-9.5 1.57-13.969 1.57-7.687 0-13.836-2.172-18.445-6.516-4.609-4.344-6.914-9.687-6.914-16.031 0-6.75 2.492-12.242 7.477-16.477 4.984-4.234 10.726-6.351 17.226-6.351 3.906 0 7.492.687 10.758 2.062 3.266 1.375 5.695 2.86 7.289 4.453 2.25 2.313 4.109 5.172 5.578 8.579 1 2.375 1.5 5.125 1.5 8.25v4.078zm-10.64-9.61c-1.469-2.75-3.391-4.804-5.766-6.164-2.375-1.36-5.203-2.039-8.484-2.039-3.25 0-6.063.68-8.438 2.04-2.375 1.359-4.312 3.413-5.812 6.163h28.5zM315.048 167.297v12.094h3.469c2.312 0 3.961.445 4.945 1.336.984.89 1.477 2.054 1.477 3.492 0 1.406-.493 2.554-1.477 3.445-.984.891-2.633 1.336-4.945 1.336h-14.578c-2.313 0-3.961-.445-4.946-1.336-.984-.891-1.476-2.055-1.476-3.492 0-1.406.5-2.555 1.5-3.445 1-.891 2.64-1.336 4.922-1.336h1.5v-37.594h-1.5c-2.313 0-3.961-.445-4.946-1.336-.984-.891-1.476-2.055-1.476-3.492 0-1.438.492-2.602 1.476-3.492.985-.891 2.633-1.336 4.946-1.336l21.75.047c6.781 0 12.039 1.679 15.773 5.039 3.734 3.359 5.602 7.445 5.602 12.257 0 3-.875 5.727-2.625 8.18-1.75 2.453-4.391 4.633-7.922 6.539 2.031 1.781 4.203 4.063 6.515 6.844 1.438 1.781 3.375 4.562 5.813 8.344 2.437 0 4.047.25 4.828.75 1.406.968 2.109 2.328 2.109 4.078 0 1.406-.484 2.554-1.453 3.445-.968.891-2.609 1.336-4.922 1.336h-5.484c-7.781-12.031-14.234-19.266-19.359-21.703h-9.516zm0-9.609h7.5c2.781 0 5.266-.422 7.453-1.266 2.938-1.125 4.914-2.313 5.93-3.563 1.015-1.25 1.523-2.484 1.523-3.703 0-1.812-.968-3.492-2.906-5.039-1.937-1.547-4.766-2.32-8.484-2.32h-11.016v15.891zM407.689 172.594h-39.422c1 2.5 2.773 4.515 5.32 6.047 2.547 1.531 5.992 2.297 10.336 2.297 3.563 0 8.297-.766 14.203-2.297 2.438-.625 4.125-.938 5.063-.938 1.281 0 2.359.453 3.234 1.359.875.907 1.313 2.047 1.313 3.422 0 1.25-.469 2.313-1.407 3.188-1.25 1.156-4.297 2.258-9.14 3.305-4.844 1.046-9.5 1.57-13.969 1.57-7.688 0-13.836-2.172-18.445-6.516-4.61-4.344-6.914-9.687-6.914-16.031 0-6.75 2.492-12.242 7.476-16.477 4.984-4.234 10.727-6.351 17.227-6.351 3.906 0 7.492.687 10.757 2.062 3.266 1.375 5.696 2.86 7.29 4.454 2.25 2.312 4.109 5.171 5.578 8.578 1 2.375 1.5 5.125 1.5 8.25v4.078zm-10.641-9.61c-1.469-2.75-3.391-4.804-5.766-6.164-2.375-1.359-5.203-2.039-8.484-2.039-3.25 0-6.062.68-8.437 2.039-2.375 1.36-4.313 3.414-5.813 6.164h28.5zM427.345 146.438v2.718c1.562-1.531 2.976-2.586 4.242-3.164 1.266-.578 2.727-.867 4.383-.867 1.406 0 2.797.344 4.172 1.031 1.375.688 2.719 1.719 4.031 3.094 1.656-1.375 3.336-2.398 5.039-3.07a14.124 14.124 0 015.227-1.008c3.562 0 6.453.953 8.672 2.859 2.937 2.5 4.406 5.781 4.406 9.844v21.516c2 0 3.484.453 4.453 1.359.969.906 1.453 2.062 1.453 3.469 0 1.406-.484 2.554-1.453 3.445-.969.891-2.609 1.336-4.922 1.336h-9.141v-30.328c0-1.469-.265-2.484-.796-3.047-.532-.563-1.344-.844-2.438-.844a5.492 5.492 0 00-2.953.844c-1.156.781-2.563 2.25-4.219 4.406v19.36c2 0 3.485.453 4.453 1.359.969.906 1.453 2.062 1.453 3.469 0 1.406-.484 2.554-1.453 3.445-.968.891-2.609 1.336-4.922 1.336h-9.14v-30.328c0-1.438-.274-2.445-.821-3.024-.546-.578-1.367-.867-2.46-.867-1.125 0-2.235.352-3.329 1.055-1.093.703-2.406 2.101-3.937 4.195v19.36c2 0 3.492.453 4.476 1.359.985.906 1.477 2.062 1.477 3.469 0 1.406-.492 2.554-1.477 3.445-.984.891-2.632 1.336-4.945 1.336h-8.672c-2.312 0-3.961-.445-4.945-1.336-.984-.891-1.477-2.055-1.477-3.492 0-1.406.485-2.555 1.454-3.445.968-.891 2.468-1.336 4.5-1.336v-23.344c-2.032 0-3.532-.453-4.5-1.359-.969-.907-1.454-2.063-1.454-3.469 0-1.407.493-2.555 1.477-3.446.984-.89 2.633-1.335 4.945-1.335h9.141zM525.751 168.516c0 3.687-1.023 7.257-3.07 10.711-2.047 3.453-5.094 6.203-9.141 8.25-4.047 2.046-8.273 3.07-12.679 3.07-4.375 0-8.563-1.008-12.563-3.024-4-2.015-7.047-4.757-9.141-8.226-2.093-3.469-3.14-7.094-3.14-10.875 0-3.844 1.062-7.617 3.187-11.32 2.125-3.704 5.18-6.618 9.164-8.743 3.985-2.125 8.149-3.187 12.493-3.187 4.375 0 8.585 1.086 12.632 3.258 4.047 2.172 7.102 5.093 9.164 8.765 2.063 3.672 3.094 7.446 3.094 11.321zm-9.609.046c0-3.093-1.11-5.937-3.328-8.531-3.032-3.5-7.016-5.25-11.953-5.25-4.344 0-7.969 1.391-10.875 4.172-2.907 2.781-4.36 6-4.36 9.656 0 3 1.469 5.805 4.406 8.414 2.938 2.61 6.547 3.915 10.829 3.915 4.312 0 7.937-1.305 10.875-3.915 2.937-2.609 4.406-5.429 4.406-8.461zM557.032 156.047v19.265c0 2.063.422 3.422 1.266 4.079 1.313 1.031 3.656 1.547 7.031 1.547 4.907 0 9.438-1.047 13.594-3.141 1.594-.813 2.844-1.219 3.75-1.219 1.25 0 2.336.469 3.258 1.406.922.938 1.383 2.078 1.383 3.422 0 1.25-.5 2.328-1.5 3.235-1.532 1.468-4.555 2.82-9.071 4.054-4.515 1.235-8.32 1.852-11.414 1.852-5.968 0-10.445-1.289-13.429-3.867-2.985-2.578-4.477-5.742-4.477-9.492v-21.141h-3.469c-2.312 0-3.961-.445-4.945-1.336-.984-.891-1.477-2.055-1.477-3.492 0-1.407.493-2.555 1.477-3.446.984-.89 2.633-1.335 4.945-1.335h3.469v-8.672c0-2.313.445-3.961 1.336-4.946.891-.984 2.055-1.476 3.492-1.476 1.406 0 2.555.492 3.445 1.476.891.985 1.336 2.633 1.336 4.946v8.672h17.766c2.313 0 3.961.445 4.945 1.335.985.891 1.477 2.055 1.477 3.493 0 1.406-.492 2.554-1.477 3.445-.984.891-2.632 1.336-4.945 1.336h-17.766zM642.126 172.594h-39.422c1 2.5 2.774 4.515 5.321 6.047 2.546 1.531 5.992 2.297 10.336 2.297 3.562 0 8.296-.766 14.203-2.297 2.437-.625 4.125-.938 5.062-.938 1.281 0 2.36.453 3.235 1.359.875.907 1.312 2.047 1.312 3.422 0 1.25-.469 2.313-1.406 3.188-1.25 1.156-4.297 2.258-9.141 3.305-4.844 1.046-9.5 1.57-13.969 1.57-7.687 0-13.836-2.172-18.445-6.516-4.609-4.344-6.914-9.687-6.914-16.031 0-6.75 2.492-12.242 7.477-16.477 4.984-4.234 10.726-6.351 17.226-6.351 3.906 0 7.492.687 10.758 2.062 3.266 1.375 5.695 2.86 7.289 4.454 2.25 2.312 4.109 5.171 5.578 8.578 1 2.375 1.5 5.125 1.5 8.25v4.078zm-10.64-9.61c-1.469-2.75-3.391-4.804-5.766-6.164-2.375-1.359-5.203-2.039-8.484-2.039-3.25 0-6.063.68-8.438 2.039-2.375 1.36-4.312 3.414-5.812 6.164h28.5z"></path></g></g></svg></a></div></div><div class="w-full lg:w-2/3  lg:pl-16 hidden lg:flex flex-wrap justify-between"><div class="w-full md:w-1/3 lg:w-auto"><h3 class="mb-6 text-2xl font-bold text-white">Company</h3><ul><li><a class="text-gray-400 hover:text-gray-300" target="_blank" href="https://github.com/coderemotedotdev" aria-label="">GitHub</a></li><li class="mb-4"><a class="text-gray-400 hover:text-gray-300" href="mailto:kapil@coderemote.dev" aria-label="">Contact Us</a></li></ul></div></div></div><p class="lg:text-center text-sm text-gray-400 border-t border-[rgb(255,255,255,0.2)] pt-8 mt-0 hidden lg:block">© <!-- -->2024<!-- --> CodeRemote. <!-- -->Creative Commons BY-NC-ND 4.0 License<!-- -->.</p></div></div></footer> </body></html>